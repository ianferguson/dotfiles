# phony domain for some common internal alises/workflows
Host *.internal
  ForwardAgent yes
  UserKnownHostsFile /dev/null
Host *.prod.internal
  ProxyCommand ssh -T jumpbox.datadoghq.com -W `echo %h | cut -d. -f1`.datadog.service.consul:%p
Host *.staging.internal
  ProxyCommand ssh -T jumpbox.datad0g.com -W `echo %h | cut -d. -f1`.datadog.service.consul:%p
Host *.datadoghq.com
  ForwardAgent yes
Host *.datad0g.com
  ForwardAgent yes
Host *
  AddKeysToAgent yes
  # ControlMaster + Path set up auto usage of multiplexed network sockets for ssh
  ControlMaster auto
  ControlPath /tmp/%h_%p_%r.ssh
  ControlPersist 60m
  ExitOnForwardFailure yes
  # Default to never forwarding our ssh-agent
  ForwardAgent no
  # by default do not allow password auth
  PasswordAuthentication no
  ServerAliveCountMax 2
  ServerAliveInterval 30
  # this only disables host key checking when not already
  # present in the local known_hosts file. in the case that a
  # host fingerprint is already known it should just be put in
  # known hosts prior to attempting to connect.
  StrictHostKeyChecking no
  UseKeychain yes
